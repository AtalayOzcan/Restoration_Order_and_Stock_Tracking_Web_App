@model Restaurant_Order_and_Stock_Tracking_Web_App.MVC.ViewModels.Users.UserCreateViewModel
@{
    ViewData["Title"] = "Yeni Kullanıcı";
    var roles = ViewBag.Roles as List<string?> ?? new List<string?>();
}
@section Styles {
    <style>
        .form-card { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; max-width: 560px; }
        .form-title { font-family: 'Syne', sans-serif; font-size: 1.2rem; font-weight: 700; color: var(--text); margin-bottom: 1.5rem; }
        .f-group { margin-bottom: 1.1rem; }
        .f-label { display: block; font-size: 0.8rem; font-weight: 500; color: var(--text-muted); margin-bottom: 0.35rem; text-transform: uppercase; letter-spacing: 0.4px; }
        .f-input, .f-select {
            width: 100%; padding: 0.7rem 0.9rem; background: var(--surface2);
            border: 1px solid var(--border); border-radius: 8px; color: var(--text);
            font-size: 0.9rem; outline: none; box-sizing: border-box; transition: border-color 0.2s;
        }
        .f-input:focus, .f-select:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(249,115,22,0.1); }
        .f-error-msg { font-size: 0.78rem; color: #f87171; margin-top: 0.25rem; }
        .form-actions { display: flex; gap: 0.75rem; margin-top: 1.5rem; }
        .btn-primary { padding: 0.65rem 1.5rem; background: var(--accent); color: #fff; border: none; border-radius: 8px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: background 0.2s; }
        .btn-primary:hover { background: var(--accent-hover); }
        .btn-back { padding: 0.65rem 1.2rem; background: rgba(255,255,255,0.07); color: var(--text-muted); border: none; border-radius: 8px; font-size: 0.9rem; cursor: pointer; text-decoration: none; }
        .btn-back:hover { background: rgba(255,255,255,0.12); }
        .f-hint { font-size: 0.77rem; color: var(--text-muted); margin-top: 0.2rem; }
        .alert-error { background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); border-radius: 10px; padding: 0.75rem 1rem; font-size: 0.85rem; color: #fca5a5; margin-bottom: 1rem; }
    </style>
}

<a asp-action="Index" class="btn-back" style="display:inline-block;margin-bottom:1rem;">← Geri</a>

<div class="form-card">
    <div class="form-title">+ Yeni Kullanıcı</div>

    @if (!ViewData.ModelState.IsValid && ViewData.ModelState.ErrorCount > 0)
    {
        <div class="alert-error">
            @foreach (var e in ViewData.ModelState.Values.SelectMany(v => v.Errors))
            { <div>@e.ErrorMessage</div> }
        </div>
    }

    <form asp-action="Create" method="post">
        @Html.AntiForgeryToken()

        <div class="f-group">
            <label class="f-label" asp-for="FullName">Ad Soyad *</label>
            <input class="f-input" asp-for="FullName" placeholder="Ahmet Yılmaz" />
            <span class="f-error-msg" asp-validation-for="FullName"></span>
        </div>

        <div class="f-group">
            <label class="f-label" asp-for="UserName">Kullanıcı Adı *</label>
            <input class="f-input" asp-for="UserName" placeholder="ahmetyilmaz" autocomplete="off" />
            <span class="f-error-msg" asp-validation-for="UserName"></span>
        </div>

        <div class="f-group">
            <label class="f-label" asp-for="Email">E-posta</label>
            <input class="f-input" asp-for="Email" type="email" placeholder="ornek@mail.com" />
            <span class="f-error-msg" asp-validation-for="Email"></span>
        </div>

        <div class="f-group">
            <label class="f-label" asp-for="PhoneNumber">Telefon</label>
            <input class="f-input" asp-for="PhoneNumber" placeholder="05XX XXX XX XX" />
            <span class="f-error-msg" asp-validation-for="PhoneNumber"></span>
        </div>

        <div class="f-group">
            <label class="f-label" asp-for="Password">Şifre *</label>
            <input class="f-input" asp-for="Password" type="password" autocomplete="new-password" placeholder="En az 6 karakter" />
            <span class="f-hint">En az 6 karakter.</span>
            <span class="f-error-msg" asp-validation-for="Password"></span>
        </div>

        <div class="f-group">
            <label class="f-label" asp-for="Role">Rol *</label>
            <select class="f-select" asp-for="Role">
                <option value="">— Rol Seçin —</option>
                @foreach (var r in roles)
                {
                    <option value="@r">@(r == "Admin" ? "Yönetici" : r == "Garson" ? "Garson" : r)</option>
                }
            </select>
            <span class="f-error-msg" asp-validation-for="Role"></span>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn-primary">Oluştur</button>
            <a asp-action="Index" class="btn-back">İptal</a>
        </div>
    </form>
</div>
